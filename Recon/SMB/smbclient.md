# 445 tcp - SMB

_references:_ 

* [https://0xdf.gitlab.io/2018/12/02/pwk-notes-smb-enumeration-checklist-update1.html\#nmblookupAnother](https://0xdf.gitlab.io/2018/12/02/pwk-notes-smb-enumeration-checklist-update1.html#nmblookupAnother) 
* [http://www.madirish.net/59](http://www.madirish.net/59)



# List shares
```bash
smbclient -L //10.10.10.10 -N (list shares)
```

# Anoymous login share
```bash
smbclient //10.10.10.10/share -N 
```


```bash
smbclient -L //10.10.10.10 -N
```

### SMBCLient

```bash
smbclient -L \\192.168.1.5

Enter WORKGROUP\root's password:

# Sharename       Type      Comment
#         ---------       ----      -------
#         IPC$            IPC       Remote IPC
#         share           Disk
#         wwwroot         Disk
#         ADMIN$          Disk      Remote Admin
#         C$              Disk      Default share
# Reconnecting with SMB1 for workgroup listing.
#Server               Comment
#         ---------            -------
#Workgroup            Master
#         ---------            -------
```


# use smb1
```bash
smbclient -L //10.10.10.10 --option='client min protocol=NT1' -U"administrator"

# no pass
smbclient -L //10.10.10.10 -N
```

# Nmap Scan
```bash
nmap -v -p 139,445 -oG smb.txt  10.11.24.1-100
```



# smb enum script
```bash
nmap -p 139,445 --script smb-enum-users <ipaddress_here>
```


# Checks for OS of SMB
```bash
nmap -v -p 139,445 --script smb-os-discovery 10.11.24.85
```


# Checks for smb vulnerability
```bash
nmap -v -p 139,445 --script vuln <ipaddress_here>
```

